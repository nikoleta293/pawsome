{% extends 'main.html' %}




{% block content %}


{% load static %}

<link rel="stylesheet"  href="{% static 'final_reg_pro.css' %}">

  <form method="POST" action="" id="pro_form">

    {% csrf_token %}

    <div class="all-together-pro">

        {% for field in verify_form%}

        <div class="all-fields-pro">
                <p>


                    <label class="tags" for="{{field.id_for_label}}">{{field.label_tag}}</label>
                    {{field}}
                    
                    {% if field.help_text %}
                        <div class="help-fields">
                            <small id="help-text" style="color:grey;">{{field.help_text}}</small>
                        </div>
                    {% endif  %}


                    
                    {% if verify_form.errors %}
                    
                        {% for error in field.errors %}

                            <p style="color: red;">{{error}}</p>
                        
                        
                        {% endfor %}

                    {% endif %}
                   
                </p>

            </div>

        {% endfor %}

        
        <div id="Cert-Popup">

            <table>
              <tr>
                <th>Attention!!!</th>
              </tr>
                <tr>
                <td>
                    The attestation of your data are in progress.
                    Please wait... 
                    
                    <div class="loader"></div>

                    <button id="ok">Ok</button>

                </td>
               
          </table>


        </div>

        <div class="buttons">
             <input id="Open-Cert-Popup" class="btn btn-primary cfg" type="submit" value="Next">
             <a id="back" href="{% url 'login' %}">Back</a>
        </div>

{% endblock content %}



{% block javascript %}
    
        <script type="text/javascript" window.CSRF_TOKEN = "{{ csrf_token }}";>

            var CertPopup = document.getElementById("Cert-Popup");

            var openCertPopup = document.getElementById("Open-Cert-Popup")
            var closeCertPopup = document.getElementById("ok")

            var loader = document.getElementsByClassName("loader")

            closeCertPopup.addEventListener('click', () => {
                CertPopup.style.display = "none";
            })

            openCertPopup.addEventListener('click',()=>{

                CertPopup.style.display = "block";

                alert('hello');

                setTimeout(() => {

                    CertPopup.style.display = "none";

                    }, "5000")

            })



        $(document).ready(function() {
                    validate();
                    $('input').on('keyup', validate);
                    });

                    function validate() {
                    var inputsWithValues = 0;
                    
                    // get all input fields except for type='submit'
                    var myInputs = $("input:not([type='submit'])");

                    myInputs.each(function(e) {
                        // if it has a value, increment the counter
                        if ($(this).val()) {
                        inputsWithValues += 1;
                        }
                    });

                    

                    if (inputsWithValues == myInputs.length-1) {
                        $("input[type=submit]").prop("disabled", false);
                    } else {
                        $("input[type=submit]").prop("disabled", true);
                    }
                }







        </script>


{% endblock javascript %}